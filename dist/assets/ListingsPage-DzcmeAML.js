import{c as g,j as s,S as m,M as u,L as C,a as y,X as j,r as o,f as b,b as f,u as N,N as v,A as w,C as F,F as S}from"./index-BDmL_pBI.js";import{S as k}from"./sparkles-DvWSUb5Z.js";import{B as L,S as A,F as G,U as P}from"./users-BGKoEcau.js";const D=[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],B=g("car-front",D);const M=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],E=g("sliders-horizontal",M);function T({car:e,onClick:a}){const c=e.image_urls&&e.image_urls.length>0?e.image_urls[0]:"/placeholder-car.jpg";return s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:21:9",id:`car-card-${e.id}`,onClick:a,className:"group relative bg-white rounded-2xl overflow-hidden cursor-pointer transition-all duration-300 hover:-translate-y-1 hover:shadow-xl shadow-md",children:[s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:27:13",className:"relative aspect-[16/10] overflow-hidden bg-gray-100",children:[s.jsx("img",{"code-path":"src/components/listings/CarCard.tsx:28:17",src:c,alt:`${e.brand} ${e.model}`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"}),e.isNew&&s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:37:21",className:"absolute top-3 left-3 flex items-center gap-1 bg-gradient-to-r from-amber-500 to-orange-500 text-white text-[11px] font-bold px-2.5 py-1 rounded-full shadow-lg",children:[s.jsx(k,{"code-path":"src/components/listings/CarCard.tsx:38:25",className:"w-3 h-3"}),"NEW"]}),e.isVerified&&s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:45:21",className:"absolute top-3 right-3 flex items-center gap-1 bg-emerald-500/90 backdrop-blur-sm text-white text-[11px] font-semibold px-2.5 py-1 rounded-full",children:[s.jsx(L,{"code-path":"src/components/listings/CarCard.tsx:46:25",className:"w-3 h-3"}),"Verified"]}),s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:52:17",className:"absolute bottom-3 right-3 bg-[#0B0F17]/80 backdrop-blur-sm text-white px-3 py-1.5 rounded-xl",children:[s.jsxs("span",{"code-path":"src/components/listings/CarCard.tsx:53:21",className:"text-sm font-bold",children:["KES ",e.price.toLocaleString()]}),s.jsx("span",{"code-path":"src/components/listings/CarCard.tsx:54:21",className:"text-[10px] text-white/70 ml-0.5",children:"/day"})]})]}),s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:59:13",className:"p-4",children:[s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:61:17",className:"flex items-start justify-between gap-2 mb-1",children:[s.jsxs("h3",{"code-path":"src/components/listings/CarCard.tsx:62:21",className:"font-semibold text-[#0B0F17] text-[15px] leading-tight line-clamp-1",children:[e.brand," ",e.model]}),e.rating>0&&s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:66:25",className:"flex items-center gap-1 shrink-0",children:[s.jsx(m,{"code-path":"src/components/listings/CarCard.tsx:67:29",className:"w-3.5 h-3.5 fill-amber-400 text-amber-400"}),s.jsx("span",{"code-path":"src/components/listings/CarCard.tsx:68:29",className:"text-xs font-semibold text-[#0B0F17]",children:Number(e.rating).toFixed(1)}),s.jsxs("span",{"code-path":"src/components/listings/CarCard.tsx:71:29",className:"text-[10px] text-gray-400",children:["(",e.reviews,")"]})]})]}),s.jsx("p",{"code-path":"src/components/listings/CarCard.tsx:77:17",className:"text-xs text-gray-500 mb-2.5",children:e.name}),s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:80:17",className:"flex items-center gap-1 mb-3",children:[s.jsx(u,{"code-path":"src/components/listings/CarCard.tsx:81:21",className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{"code-path":"src/components/listings/CarCard.tsx:82:21",className:"text-xs text-gray-500 line-clamp-1",children:e.location})]}),s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:86:17",className:"flex items-center gap-3 text-[11px] text-gray-500",children:[e.transmission&&s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:88:25",className:"flex items-center gap-1",children:[s.jsx(A,{"code-path":"src/components/listings/CarCard.tsx:89:29",className:"w-3 h-3"}),s.jsx("span",{"code-path":"src/components/listings/CarCard.tsx:90:29",children:e.transmission})]}),e.fuel&&s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:94:25",className:"flex items-center gap-1",children:[s.jsx(G,{"code-path":"src/components/listings/CarCard.tsx:95:29",className:"w-3 h-3"}),s.jsx("span",{"code-path":"src/components/listings/CarCard.tsx:96:29",children:e.fuel})]}),e.capacity&&s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:100:25",className:"flex items-center gap-1",children:[s.jsx(P,{"code-path":"src/components/listings/CarCard.tsx:101:29",className:"w-3 h-3"}),s.jsx("span",{"code-path":"src/components/listings/CarCard.tsx:102:29",children:e.capacity})]})]}),s.jsxs("div",{"code-path":"src/components/listings/CarCard.tsx:108:17",className:"mt-3 pt-3 border-t border-gray-100 flex items-center gap-2",children:[s.jsx("div",{"code-path":"src/components/listings/CarCard.tsx:109:21",className:"w-5 h-5 rounded-full bg-gradient-to-br from-[#D7A04D] to-[#B8862D] flex items-center justify-center",children:s.jsx("span",{"code-path":"src/components/listings/CarCard.tsx:110:25",className:"text-[9px] font-bold text-white",children:e.hostName.charAt(0).toUpperCase()})}),s.jsxs("span",{"code-path":"src/components/listings/CarCard.tsx:114:21",className:"text-[11px] text-gray-500",children:["Hosted by ",s.jsx("span",{"code-path":"src/components/listings/CarCard.tsx:115:35",className:"font-medium text-gray-700",children:e.hostName})]})]})]})]})}function H({cars:e,loading:a,onCarClick:c,onClearFilters:n}){return a&&e.length===0?s.jsx("div",{"code-path":"src/components/listings/CarGrid.tsx:25:13",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:Array.from({length:8}).map((r,i)=>s.jsxs("div",{"code-path":"src/components/listings/CarGrid.tsx:27:21",className:"bg-white rounded-2xl overflow-hidden shadow-sm animate-pulse",children:[s.jsx("div",{"code-path":"src/components/listings/CarGrid.tsx:31:25",className:"aspect-[16/10] bg-gray-200"}),s.jsxs("div",{"code-path":"src/components/listings/CarGrid.tsx:32:25",className:"p-4 space-y-3",children:[s.jsx("div",{"code-path":"src/components/listings/CarGrid.tsx:33:29",className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{"code-path":"src/components/listings/CarGrid.tsx:34:29",className:"h-3 bg-gray-100 rounded w-1/2"}),s.jsx("div",{"code-path":"src/components/listings/CarGrid.tsx:35:29",className:"h-3 bg-gray-100 rounded w-2/3"}),s.jsxs("div",{"code-path":"src/components/listings/CarGrid.tsx:36:29",className:"flex gap-2 mt-2",children:[s.jsx("div",{"code-path":"src/components/listings/CarGrid.tsx:37:33",className:"h-5 bg-gray-100 rounded-full w-16"}),s.jsx("div",{"code-path":"src/components/listings/CarGrid.tsx:38:33",className:"h-5 bg-gray-100 rounded-full w-14"})]})]})]},i))}):!a&&e.length===0?s.jsxs("div",{"code-path":"src/components/listings/CarGrid.tsx:50:13",className:"flex flex-col items-center justify-center py-20 px-6",children:[s.jsx("div",{"code-path":"src/components/listings/CarGrid.tsx:51:17",className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mb-5",children:s.jsx(B,{"code-path":"src/components/listings/CarGrid.tsx:52:21",className:"w-10 h-10 text-gray-300"})}),s.jsx("h3",{"code-path":"src/components/listings/CarGrid.tsx:54:17",className:"text-lg font-semibold text-[#0B0F17] mb-2",children:"No cars found"}),s.jsx("p",{"code-path":"src/components/listings/CarGrid.tsx:57:17",className:"text-sm text-gray-500 text-center max-w-sm mb-6",children:"Try adjusting your search, category, or date filters to find available cars."}),n&&s.jsx("button",{"code-path":"src/components/listings/CarGrid.tsx:62:21",onClick:n,className:"btn-primary text-sm",children:"Clear All Filters"})]}):s.jsxs("div",{"code-path":"src/components/listings/CarGrid.tsx:74:9",className:"relative",children:[a&&e.length>0&&s.jsx("div",{"code-path":"src/components/listings/CarGrid.tsx:77:17",className:"absolute -top-8 left-1/2 -translate-x-1/2 z-10",children:s.jsxs("div",{"code-path":"src/components/listings/CarGrid.tsx:78:21",className:"flex items-center gap-2 bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-sm text-xs text-gray-500",children:[s.jsx(C,{"code-path":"src/components/listings/CarGrid.tsx:79:25",className:"w-3 h-3 animate-spin"}),"Refreshingâ€¦"]})}),s.jsx("div",{"code-path":"src/components/listings/CarGrid.tsx:86:13",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:e.map(r=>s.jsx(T,{"code-path":"src/components/listings/CarGrid.tsx:88:21",car:r,onClick:()=>c(r)},r.id))})]})}const _=["All","Automatic","Manual","Hybrid","Petrol","Diesel","Electric"],Q=[{value:"newest",label:"Newest",icon:"âœ¨"},{value:"topRated",label:"Top Rated",icon:"â­"},{value:"priceLow",label:"Price: Low",icon:"â†‘"},{value:"priceHigh",label:"Price: High",icon:"â†“"}];function z({filters:e,onChange:a,totalCount:c,filteredCount:n}){const r=e.searchQuery||e.category&&e.category!=="All"||e.sortType!=="newest",i=t=>a({...e,...t});return s.jsxs("div",{"code-path":"src/components/listings/SearchFilters.tsx:48:9",className:"space-y-4",children:[s.jsxs("div",{"code-path":"src/components/listings/SearchFilters.tsx:50:13",className:"relative",children:[s.jsx(y,{"code-path":"src/components/listings/SearchFilters.tsx:51:17",className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{"code-path":"src/components/listings/SearchFilters.tsx:52:17",type:"text",id:"search-cars",placeholder:"Search by brand, model, location, or hostâ€¦",value:e.searchQuery??"",onChange:t=>i({searchQuery:t.target.value}),className:"w-full pl-11 pr-10 py-3 bg-white border border-gray-200 rounded-xl text-sm text-[#0B0F17] placeholder:text-gray-400 focus:outline-none focus:border-[#D7A04D] focus:ring-1 focus:ring-[#D7A04D]/30 transition-colors"}),e.searchQuery&&s.jsx("button",{"code-path":"src/components/listings/SearchFilters.tsx:61:21",onClick:()=>i({searchQuery:""}),className:"absolute right-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors",children:s.jsx(j,{"code-path":"src/components/listings/SearchFilters.tsx:65:25",className:"w-3 h-3 text-gray-500"})})]}),s.jsxs("div",{"code-path":"src/components/listings/SearchFilters.tsx:71:13",className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[s.jsx("div",{"code-path":"src/components/listings/SearchFilters.tsx:73:17",className:"flex items-center gap-2 overflow-x-auto pb-1 scrollbar-hide flex-1",children:_.map(t=>s.jsx("button",{"code-path":"src/components/listings/SearchFilters.tsx:75:25",onClick:()=>i({category:t}),className:`shrink-0 px-3.5 py-1.5 rounded-full text-xs font-medium transition-all duration-200 ${(e.category??"All")===t?"bg-[#0B0F17] text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:t},t))}),s.jsx("div",{"code-path":"src/components/listings/SearchFilters.tsx:89:17",className:"hidden sm:block w-px h-6 bg-gray-200"}),s.jsxs("div",{"code-path":"src/components/listings/SearchFilters.tsx:92:17",className:"flex items-center gap-1.5",children:[s.jsx(E,{"code-path":"src/components/listings/SearchFilters.tsx:93:21",className:"w-3.5 h-3.5 text-gray-400 mr-1"}),Q.map(t=>s.jsxs("button",{"code-path":"src/components/listings/SearchFilters.tsx:95:25",onClick:()=>i({sortType:t.value}),className:`shrink-0 px-2.5 py-1.5 rounded-lg text-[11px] font-medium transition-all duration-200 ${e.sortType===t.value?"bg-[#D7A04D]/10 text-[#B8862D] border border-[#D7A04D]/30":"text-gray-500 hover:bg-gray-50"}`,children:[t.icon," ",t.label]},t.value))]})]}),s.jsxs("div",{"code-path":"src/components/listings/SearchFilters.tsx:110:13",className:"flex items-center justify-between",children:[s.jsxs("p",{"code-path":"src/components/listings/SearchFilters.tsx:111:17",className:"text-xs text-gray-500",children:["Showing"," ",s.jsx("span",{"code-path":"src/components/listings/SearchFilters.tsx:113:21",className:"font-semibold text-[#0B0F17]",children:n})," ",n!==c&&s.jsxs(s.Fragment,{children:["of"," ",s.jsx("span",{"code-path":"src/components/listings/SearchFilters.tsx:119:29",className:"font-semibold text-[#0B0F17]",children:c})," "]}),"car",n!==1?"s":""]}),r&&s.jsx("button",{"code-path":"src/components/listings/SearchFilters.tsx:126:21",onClick:()=>a({searchQuery:"",category:"All",sortType:"newest"}),className:"text-xs text-[#D7A04D] hover:text-[#B8862D] font-medium transition-colors",children:"Clear filters"})]})]})}function $(e){const[a,c]=o.useState([]),[n,r]=o.useState(!0),[i,t]=o.useState(null),[l,p]=o.useState({searchQuery:"",category:"All",sortType:"newest"}),d=o.useCallback(async()=>{try{r(!0),t(null);const x=await b(e);c(x)}catch(x){t(x instanceof Error?x:new Error("Failed to load cars")),console.error("ðŸš¨ Fetch Cars Error:",x)}finally{r(!1)}},[e?.startDate,e?.endDate]);o.useEffect(()=>{d()},[d]);const h=o.useMemo(()=>f(a,l),[a,l]);return{cars:h,allCars:a,loading:n,error:i,filters:l,setFilters:p,refetch:d,totalCount:a.length,filteredCount:h.length}}function U(){const e=N(),{cars:a,loading:c,filters:n,setFilters:r,totalCount:i,filteredCount:t}=$(),l=d=>{e(`/car/${d.id}`)},p=()=>{r({searchQuery:"",category:"All",sortType:"newest"})};return s.jsxs("div",{"code-path":"src/pages/ListingsPage.tsx:33:9",className:"min-h-screen bg-[#F4F6F8]",children:[s.jsx("div",{"code-path":"src/pages/ListingsPage.tsx:35:13",className:"grain-overlay"}),s.jsx(v,{"code-path":"src/pages/ListingsPage.tsx:38:13"}),s.jsxs("main",{"code-path":"src/pages/ListingsPage.tsx:41:13",className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8 max-w-[1400px] mx-auto",children:[s.jsxs("div",{"code-path":"src/pages/ListingsPage.tsx:43:17",className:"mb-8",children:[s.jsxs("button",{"code-path":"src/pages/ListingsPage.tsx:44:21",onClick:()=>e("/"),className:"inline-flex items-center gap-1.5 text-sm text-gray-500 hover:text-[#0B0F17] mb-4 transition-colors",children:[s.jsx(w,{"code-path":"src/pages/ListingsPage.tsx:48:25",className:"w-4 h-4"}),"Back to home"]}),s.jsxs("div",{"code-path":"src/pages/ListingsPage.tsx:51:21",className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{"code-path":"src/pages/ListingsPage.tsx:52:25",className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#D7A04D] to-[#B8862D] flex items-center justify-center",children:s.jsx(F,{"code-path":"src/pages/ListingsPage.tsx:53:29",className:"w-5 h-5 text-white"})}),s.jsxs("div",{"code-path":"src/pages/ListingsPage.tsx:55:25",children:[s.jsx("h1",{"code-path":"src/pages/ListingsPage.tsx:56:29",className:"text-2xl font-bold text-[#0B0F17] font-display tracking-tight",children:"Available Cars"}),s.jsx("p",{"code-path":"src/pages/ListingsPage.tsx:59:29",className:"text-sm text-gray-500",children:"Browse real cars uploaded by verified hosts across Kenya"})]})]})]}),s.jsx("div",{"code-path":"src/pages/ListingsPage.tsx:67:17",className:"mb-8",children:s.jsx(z,{"code-path":"src/pages/ListingsPage.tsx:68:21",filters:n,onChange:r,totalCount:i,filteredCount:t})}),s.jsx(H,{"code-path":"src/pages/ListingsPage.tsx:77:17",cars:a,loading:c,onCarClick:l,onClearFilters:p})]}),s.jsx(S,{"code-path":"src/pages/ListingsPage.tsx:86:13"})]})}export{U as default};
