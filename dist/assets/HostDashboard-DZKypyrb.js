import{c as l,r as n,s as c,j as e,R as h}from"./index-BDmL_pBI.js";import{F as v,C as b,S}from"./share-2-BerHvd2V.js";import{S as k}from"./sparkles-DvWSUb5Z.js";const _=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],g=l("circle-check-big",_);const F=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],C=l("clock",F);const j=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],z=l("download",j),p={pending:{label:"Queued",color:"#F59E0B",icon:C},rendering:{label:"Rendering",color:"#3B82F6",icon:h},complete:{label:"Complete",color:"#10B981",icon:g},failed:{label:"Failed",color:"#EF4444",icon:b}},w={showcase:"ğŸ¬ Car Showcase",social_reel:"ğŸ“± Social Reel",og_video:"ğŸ”— OG Preview",hero:"ğŸ  Hero Video",ad:"ğŸ“¢ Ad Campaign",onboarding:"ğŸ‘‹ Welcome Video"};function A(a){const s=Math.floor((Date.now()-new Date(a).getTime())/1e3);return s<60?"Just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}function M(){const[a,s]=n.useState([]),[x,i]=n.useState(!0),[r,m]=n.useState("all"),d=n.useCallback(async()=>{i(!0);const o=c.from("render_queue").select("*, car:cars(brand, model, name)").order("created_at",{ascending:!1}).limit(50);r!=="all"&&o.eq("status",r);const{data:t}=await o;s(t??[]),i(!1)},[r]);n.useEffect(()=>{d();const o=c.channel("render-queue-updates").on("postgres_changes",{event:"*",schema:"public",table:"render_queue"},()=>d()).subscribe();return()=>{c.removeChannel(o)}},[d]);const u=a.filter(o=>o.status==="complete"),f=a.filter(o=>o.status==="pending"||o.status==="rendering"),y=a.filter(o=>o.status==="failed");return e.jsxs("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:105:9",style:{maxWidth:960,margin:"0 auto",padding:"40px 24px",fontFamily:"'Inter', sans-serif"},children:[e.jsxs("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:114:13",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:32},children:[e.jsxs("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:122:17",children:[e.jsxs("h1",{"code-path":"src/components/dashboard/HostDashboard.tsx:123:21",style:{fontFamily:"'Montserrat', sans-serif",fontSize:28,fontWeight:800,color:"#F4F6F8",margin:0},children:[e.jsx(v,{"code-path":"src/components/dashboard/HostDashboard.tsx:132:25",style:{display:"inline",marginRight:10,verticalAlign:"middle"},size:24}),"Marketing Studio"]}),e.jsx("p",{"code-path":"src/components/dashboard/HostDashboard.tsx:142:21",style:{fontSize:14,color:"rgba(244, 246, 248, 0.5)",marginTop:4},children:"Auto-generated videos for your listings"})]}),e.jsxs("button",{"code-path":"src/components/dashboard/HostDashboard.tsx:152:17",onClick:d,style:{background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.1)",color:"#D7A04D",padding:"8px 16px",borderRadius:8,fontSize:13,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:[e.jsx(h,{"code-path":"src/components/dashboard/HostDashboard.tsx:167:21",size:14}),"Refresh"]})]}),e.jsx("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:173:13",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:16,marginBottom:32},children:[{label:"Ready",value:u.length,icon:g,color:"#10B981"},{label:"Processing",value:f.length,icon:k,color:"#3B82F6"},{label:"Failed",value:y.length,icon:b,color:"#EF4444"}].map(o=>e.jsxs("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:186:21",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.06)",borderRadius:12,padding:"20px 24px"},children:[e.jsxs("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:195:25",style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(o.icon,{"code-path":"src/components/dashboard/HostDashboard.tsx:203:29",size:16,color:o.color}),e.jsx("span",{"code-path":"src/components/dashboard/HostDashboard.tsx:204:29",style:{fontSize:12,color:"rgba(244,246,248,0.4)",textTransform:"uppercase",letterSpacing:"0.08em"},children:o.label})]}),e.jsx("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:215:25",style:{fontFamily:"'Montserrat', sans-serif",fontSize:28,fontWeight:700,color:"#F4F6F8"},children:o.value})]},o.label))}),e.jsx("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:230:13",style:{display:"flex",gap:8,marginBottom:20},children:["all","complete","pending","failed"].map(o=>e.jsx("button",{"code-path":"src/components/dashboard/HostDashboard.tsx:238:21",onClick:()=>m(o),style:{padding:"6px 14px",borderRadius:6,fontSize:13,border:"none",cursor:"pointer",backgroundColor:r===o?"rgba(215, 160, 77, 0.15)":"rgba(255,255,255,0.04)",color:r===o?"#D7A04D":"rgba(244,246,248,0.5)",fontWeight:r===o?600:400},children:o==="all"?"All":o.charAt(0).toUpperCase()+o.slice(1)},o))}),x?e.jsx("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:262:17",style:{textAlign:"center",padding:48,color:"rgba(244,246,248,0.3)"},children:"Loading..."}):a.length===0?e.jsx("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:272:17",style:{textAlign:"center",padding:48,color:"rgba(244,246,248,0.3)"},children:"No render jobs found."}):e.jsx("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:282:17",style:{display:"flex",flexDirection:"column",gap:8},children:a.map(o=>{const t=p[o.status]??p.pending,D=t.icon,H=o.car?`${o.car.brand} ${o.car.model}`:"Unknown Car";return e.jsxs("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:291:29",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.06)",borderRadius:10,padding:"16px 20px",display:"flex",alignItems:"center",gap:16},children:[e.jsx(D,{"code-path":"src/components/dashboard/HostDashboard.tsx:304:33",size:18,color:t.color,style:{flexShrink:0,animation:o.status==="rendering"?"spin 1s linear infinite":void 0}}),e.jsxs("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:317:33",style:{flex:1},children:[e.jsx("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:318:37",style:{fontSize:14,fontWeight:600,color:"#F4F6F8"},children:H}),e.jsxs("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:327:37",style:{fontSize:12,color:"rgba(244,246,248,0.4)",marginTop:2},children:[w[o.render_type]??o.render_type," ","Â· ",A(o.created_at)]})]}),e.jsx("span",{"code-path":"src/components/dashboard/HostDashboard.tsx:340:33",style:{fontSize:11,fontWeight:600,color:t.color,backgroundColor:`${t.color}15`,padding:"4px 10px",borderRadius:6},children:t.label}),o.status==="complete"&&o.output_url&&e.jsxs("div",{"code-path":"src/components/dashboard/HostDashboard.tsx:355:37",style:{display:"flex",gap:8},children:[e.jsx("a",{"code-path":"src/components/dashboard/HostDashboard.tsx:356:41",href:o.output_url,target:"_blank",rel:"noopener noreferrer",style:{color:"#D7A04D",display:"flex",alignItems:"center",gap:4,fontSize:12,textDecoration:"none"},children:e.jsx(z,{"code-path":"src/components/dashboard/HostDashboard.tsx:369:45",size:14})}),e.jsx("button",{"code-path":"src/components/dashboard/HostDashboard.tsx:371:41",onClick:()=>{navigator.clipboard.writeText(o.output_url)},style:{background:"none",border:"none",color:"rgba(244,246,248,0.4)",cursor:"pointer",padding:0},children:e.jsx(S,{"code-path":"src/components/dashboard/HostDashboard.tsx:383:45",size:14})})]}),o.status==="failed"&&o.error_message&&e.jsx("span",{"code-path":"src/components/dashboard/HostDashboard.tsx:390:37",style:{fontSize:11,color:"#EF4444",maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:o.error_message,children:o.error_message})]},o.id)})})]})}export{M as default};
